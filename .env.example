# ===================================================================================
# GENFITY ORDER SERVICE (Go) - Environment Configuration
# ===================================================================================

# ==================== ENVIRONMENT ====================
APP_ENV=development
HTTP_ADDR=:8086

# ==================== DATABASE (PostgreSQL DIRECT - NOT PgBouncer) ====================
# IMPORTANT: Go service needs DIRECT connection to PostgreSQL (NOT PgBouncer)
# because it uses LISTEN/NOTIFY for realtime updates which doesn't work with PgBouncer
# Local dev: postgres://user:pass@localhost:5432/genfityorder
DATABASE_URL=postgres://user:pass@localhost:5432/genfityorder

# ==================== JWT AUTHENTICATION ====================
# MUST MATCH genfity-order-main values!
JWT_SECRET=your-secret-min-32-characters
JWT_EXPIRY=3600
JWT_REFRESH_EXPIRY=604800

# ==================== ORDER TRACKING ====================
# MUST MATCH genfity-order-main value!
ORDER_TRACKING_TOKEN_SECRET=dev-insecure-tracking-secret

# ==================== CORS ====================
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://127.0.0.1:3000

# ==================== OBJECT STORE (Cloudflare R2 / S3-compatible) ====================
# Required for all upload endpoints (logo/banner/menu images/payment proof/QRIS).
#
# IMPORTANT: To avoid confusion, use the SAME R2_* variables as genfity-order-main.
# Example R2 endpoint:
#   https://<account_id>.r2.cloudflarestorage.com

# Upload limit in bytes (MUST MATCH genfity-order-main MAX_FILE_SIZE)
# 5MB = 5242880
MAX_FILE_SIZE=5242880

# Cloudflare R2 (S3-compatible) - preferred config (matches Next.js)
R2_ACCOUNT_ID=
R2_ACCESS_KEY_ID=
R2_SECRET_ACCESS_KEY=
R2_BUCKET=
R2_PUBLIC_BASE_URL=
# Optional override (default can be derived from R2_ACCOUNT_ID)
R2_S3_ENDPOINT=
R2_STORAGE_CLASS=STANDARD

# Legacy / generic S3 variable names (still supported by the Go service)
# OBJECT_STORE_ENDPOINT=
# OBJECT_STORE_REGION=auto
# OBJECT_STORE_ACCESS_KEY_ID=
# OBJECT_STORE_SECRET_ACCESS_KEY=
# OBJECT_STORE_BUCKET=
# OBJECT_STORE_PUBLIC_BASE_URL=
# OBJECT_STORE_STORAGE_CLASS=STANDARD

# ==================== WEBSOCKET INTERVALS ====================
WS_HEARTBEAT_INTERVAL=30s
WS_MERCHANT_POLL_INTERVAL=5s
WS_CUSTOMER_POLL_INTERVAL=5s
WS_GROUP_ORDER_POLL_INTERVAL=5s

# ==================== RABBITMQ ====================
# Example: amqp://user:pass@localhost:5672/vhost
RABBITMQ_URL=amqp://guest:guest@localhost:5672/
RABBITMQ_WORKER_MODE=daemon

# ==================== VAPID (for web push, read-only) ====================
VAPID_PUBLIC_KEY=
